/**
 * Gradle Script for Version
 * Format Version String
 */

boolean isRelease() {
    String s = rootProject.ext.config.snapshot
    return s == null || s == "" || s == "0"
}

boolean isSnapshot() {
    return !isRelease()
}

String getBuildNum() {
    if (System.getenv("CIRCLE_BUILD_NUM") != null)
        return System.getenv("CIRCLE_BUILD_NUM")
    return "00"
}

//Example: 14.4a-SNAPSHOT-20160820
String getCSLVersion() {
    return rootProject.ext.config.version + rootProject.ext.config.dev_version +
            (isRelease() ? '' : ('-SNAPSHOT-' + getBuildNum()))
}

//Example: 14.4a-S-20160820
String getShortVersion() {
    return getVersion().replace("SNAPSHOT", "S")
}

ext {
    getCSLVersion = this.&getCSLVersion
    getShortVersion = this.&getShortVersion
}